<!DOCTYPE html>
<html lang="en-GB">
    <head>
        <title>Web Tech Assignment Report</title>
        <style>
            .img-center {
                text-align: center;
                display: block;
            }
        </style>
    </head>
    <body>
        <h1>Assignment: Report</h1>
        <h3>Contributors: Graciela Wissen Putri (tl19232),
            Shuang Tong (nj19182)
        </h3>
        <p>This website was made for a dear friend's band, Tangerine Rye.</p>
        <ul>
            <li><b>A for HTML</b></li>
            <p>We generated HTML with React. We chose React as we
               wanted to learn the industry standard.
            </p>
            <li><b>A for CSS</b></li>
            <p>We generated CSS with React, and made
            CSS modules stylesheet for each page. We also designed
            responsive pages that resize on smaller screens.
            The gradient animated background was also made with CSS.
            We also investigated several issues with CSS and React:
            <ul>
                <li>
                Font-awesome and material-ui icons behaved
                differently for style tags, solution was to
                make different functions that styled font-awesome
                icons with a div tag.
                </li>
            </ul>
            </p>
            <li><b>A for JS</b></li>
            <p>We have investigated eventListeners, eventHandlers, stateHandlers
                and browser routers with client-side JS framework,
                React. We also created animation with CSS.
            </p>
            <p>
                We spent efforts in keeping our code DRY, which means we have a number of child components
                that are called by parent components. We also learnt how to pass data and functions between parent and child
                components.
                <ul>
                <li>
                    The overhead logo and navigation bar, as well as the footer are components that
                    are called by every page.
                    On the selected page, the responding tab will display differently. This is achieved by passing down
                    property (props) from the page to the OverHeadBar.js component:
                    <img class="img-center" src="client/src/assets/headbarActive.png"/>
                </li>
                <li>
                    TOUR, SHOP, and CART pages fetch data from database then render each item as a
                    child component. This is done by mapping the json arrays:
                    <P>
                        client/src/views/ShoppingCartPage.js
                        <img class="img-center" src="client/src/assets/JsMappingCode.png" />
                    </P>
            <p>
                The above code snippet shows how we rendered the products in our shopping cart page.
                After fetching the products in the shopping cart from the local storage, we map them one by one and render them in
                the child class "CartProduct". We also pass 3 functions from the parent to the child
                (onRemove, updateCart and zeroCount) as props, so that we can update the parent from the child
                by calling back.
            </p>
            <p>
                client/src/Component/CartProduct.js
                <img class="img-center" src="client/src/assets/childCallback.png" />
            </p>
            <p>
                This is also used on updating the same page. In product's detail page, there are products that
                have multiple pictures, they are rendered as small images on the left and user can click on them
                to render them on the right with a bigger size. On cat Cap detail page, the bigger image on the right is rendered by clicking its small image
                on the left, while the url stays unchanged:
                <img class="img-center" src="client/src/assets/hat2Pic.png" />
            </p>
            <p>
                One important thing we learnt from rendering child classes by mapping is that we need to provide
                a unique key to React. This key cannot only be unique within the loop, i.e. key={index}. Because
                in this way, if we update the array and removed the first object, the previous second object will
                take over the first place, thus it will also take over the old child state of when key={0}.
            </p>
            <p>
                For example: if we have product A with attribute "count"=2 and product B with attribute "count"=1.
                They will be rendered one by one by calling the child component in the mapping loop.
                So React will know them as key={0} (for product A) and key={1}
                (for product B). So in the child states, product A will have this.state.count=2, while product B's is 1.
                This is correct.
                Now if we click the button in the child component to remove product A from the array in the parent component,
                then re-render the child component
                by mapping, the index for product B will become 0, thus key={0} for product B, as opposed to its
                previous key={1}. Then React will give B
                the state that was assigned to key={0}, which belonged to product A, and displays this.state.count=2, instead of 1.
            </p>
            <p>
                This shows how important the key attribute is in mapping child component. It has to associate with an
                unique property within the object, rather than a random looping index.
            </p>
            </li>
            <li>
                We used async functions when fetching data from the database.
                <p>
                    client/src/views/MerchPage.js
                    <img class="img-center" src="client/src/assets/async.png" />
                </p>
                <p>
                    This allows us to load the data and tell the user we are still loading,
                    then render the page after loading is completed.
                </p>
            </li>
            <li>
                We have a thorough understanding of the different type of functions: the one with arrow and the
                one without. When calling a function from within the JSX component call, it is important to call
                it with arrow format, otherwise it will be called every time that piece of code is reached (if this
                piece of code is in render function, it will lead to an infinite loop/call).
            </li>
            </ul>
            </p>
            <li><b>A for PNG</b></li>
                <p>All images in the assets folder were taken from
                    the Tangerine Rye facebook page. Images had to be
                    manually edited using Photoshop to create transparent
                    backgrounds.
                    <br>
                    <span class="img-center" style="background-color: aqua;">
                        <b>BEFORE</b>
                    <img
                        src="client/src/assets/tangerinerye_logo_before.png"
                        alt="Tangerine Rye logo before manipulation"
                        height="150" />
                    <img
                        src="client/src/assets/tangerinerye_logo.png"
                        alt="Tangerine Rye logo with transparent background"
                        height="150" />
                        <b>AFTER</b>
                    </span>
                    Album covers were also edited by cloning
                    the background pattern and stamping to remove the
                    Tangerine Rye logo.
                    <span class="img-center">
                        <b>BEFORE</b>
                    <img
                        src="client/src/assets/honey_before.jpg"
                        alt="Honey Single EP before manipulation"
                        height="200" />
                    <img
                        src="client/src/assets/honey.png"
                        alt="Honey Single EP after manipulation"
                        height="200" />
                        <b>AFTER</b>
                    <br>
                        <b>BEFORE</b>
                    <img
                        src="client/src/assets/lalalemonade_before.jpg"
                        alt="Honey Single EP before manipulation"
                        height="200" />
                    <img
                        src="client/src/assets/lalalemon.png"
                        alt="Honey Single EP after manipulation"
                        height="200" />
                        <b>AFTER</b>
                    </span>
                </p>
            <li><b>A for SVG</b></li>
                <p>All icons taken from font-awesome and material-ui
                    were SVG. As all the band logos were professionally
                    made, there was no real use for homemade SVG
                    designs. For the purpose of this assignment,
                    we created a cat SVG logo with Inkscape (because one of the
                    contributors has 5 cats at home and is obsessed
                    with cats!) and pasted it onto a t-shirt and a cap
                    as fake merchandise.
                </p>
                <p>
                    <b>The original cat logo and its merchandise:</b>
                </p>
                <span class="img-center">
                <img
                    src="client/src/assets/catLogo.svg"
                    alt="cat svg logo"
                    width="300" />
                <br>
                <img
                    src="client/src/assets/cat_whitetshirtfront.png"
                    alt="cat logo on white t-shirt"
                    width="300"/>
                <img
                    src="client/src/assets/cat_capfront.png"
                    alt="cat logo on red cap"
                    width="300"/>
                </span>
                <p>The cat logo was created using a combination of freehand drawings
                    (to draw the whiskers), path transformations (cylinders into cat eyes;
                    triangles to curve creating cat ears), as well as grouping and
                    duplicating objects to flip horizontally to create a symmetrical logo
                    (this was done by dragging a guideline down the center to only create
                    half the image first before duplicating object to create mirror image).
                    Photoshop was used to paste logo onto t-shirt and cap mockups (PNG).
                </p>
            <li><b>A for Server</b></li>
                <p>We have self-issued our own self-signed SSL certificate
                    and keys, but as we have not gotten a domain name, we could
                    not get a valid authorised certificate.
                    We also have handled port numbers and integrating with client
                    with an /api route to handle get/post requests.
                    We also handled URL parameter validation in /api/products/:productId
                    by checking that productId is always an integer through regex.
                    The server also handles 404 and 500 errors.
                </p>
            <li><b>A for Database</b></li>
                <p>We have managed to insert data and extract it in
                    localhost:3001/api/subs, by using async/await style. We have
                    designed a database schema to store email subscriptions, products
                    (name, description, pictures, price) and customers (address, name,
                    ordered products). To our knowledge, this schema is normalised up to
                    BCNF.
                </p>
            <li><b>A for Dynamic pages</b></li>
                <p>
                    We have created dynamic pages for individual product detail page. It gets rendered by user
                    clicking the "DETAILS" button in the shopping page and will take the id of the product
                    and direct to /merch/:id.
                </p>
                <p>
                    The dynamic page is not simply called by the shopping page (/merch). The product details
                    are passed from MerchPage.js to its child component Product.js, which is rendered by mapping
                    each entry of the JSON array as mentioned in JS section above. Then in Product.js the id of
                    the product is passed to ClickDetail Button in ClickButton.js, which takes it as a path for the
                    url. Then, because this url matches the pattern declared in AllPath.js (/merch/:id), the DetailPage.js gets
                    rendered. In the meantime, that id is stored to in props.match.params as a property to the page.
                </p>
                <p>
                    Then, in DetailPage.js, it fetches the id of the specific product to render from
                    this.props.match.params.id. After this async function finished, the details of this product gets
                    loaded.
                </p>
            <li>X for Depth (out of 20)</li>
        </ul>
    </body>
</html>