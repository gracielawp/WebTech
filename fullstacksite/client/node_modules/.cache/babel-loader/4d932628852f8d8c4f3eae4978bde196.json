{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\DELL\\\\WebTech\\\\fullstacksite\\\\client\\\\src\\\\views\\\\ShoppingCartPage.js\";\nimport React, { Component } from 'react';\nimport OverHeadBar from \"./OverHeadBar\";\nimport IconBar from \"./IconBar\";\nimport Link from \"@material-ui/core/Link\";\nimport CartProduct from \"../Component/CartProduct\";\nimport cart from \"../views/ShoppingCart.module.css\";\nimport CheckoutForm from \"../Component/CheckoutForm\";\nimport headBar from \"./OverHeadBar.module.css\";\n\nclass ShoppingCartPage extends Component {\n  constructor(props) {\n    super(props);\n\n    this.removeItem = index => {\n      let arr = JSON.parse(localStorage.getItem('myCart'));\n      arr.splice(index, 1);\n      localStorage.setItem('myCart', JSON.stringify(arr));\n      this.setState({\n        productList: arr\n      });\n    };\n\n    this.emptyCart = () => {\n      localStorage.clear();\n      this.setState({\n        productList: null\n      });\n    };\n\n    this.checkoutCart = childState => {\n      //console.log(childState);\n      //         //-----------------------------------------\n      //         // GRACE LOOK HERE !!!!!!!!!!!!!!!!!!!!!!!!\n      //         /*if (this.state.userEmail) {\n      //             fetch(('/api/subs'), {\n      //                 method: 'POST',\n      //                 headers: {\n      //                     'Content-Type': 'application/json'\n      //                 },\n      //                 body: JSON.stringify({\n      //                     email: this.state.userEmail\n      //                 })\n      //             }).then((res) => {\n      //                 console.log(res)\n      //             }).catch(err => console.log(err));\n      //         }*/\n      //         alert(`Success: ${this.state.userEmail} added`);\n      //     };\n      alert(\"Success\"); //console.log(\"passed to shoppingCartPage\");\n      //console.log(this.state);\n    };\n\n    this.state = {\n      loading: true,\n      productList: null\n    };\n    this.checkoutCart = this.checkoutCart.bind(this);\n  }\n\n  async componentDidMount() {\n    let cart = await localStorage.getItem('myCart');\n    var arr = JSON.parse(cart);\n\n    if (arr) {\n      this.setState({\n        productList: arr\n      });\n    }\n\n    console.log(this.state.productList);\n    this.setState({\n      loading: false\n    });\n  }\n\n  totalCost() {\n    var list = this.state.productList;\n    var sum = 0;\n\n    for (var key in list) {\n      sum += list[key].cost;\n    }\n\n    return sum;\n  }\n\n  render() {\n    if (this.state.loading) return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 40\n      }\n    }, /*#__PURE__*/React.createElement(OverHeadBar, {\n      currentPage: \"cart\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 45\n      }\n    }), \"loading...\");\n\n    if (!this.state.productList || this.state.productList.length === 0) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(OverHeadBar, {\n        currentPage: \"cart\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 21\n        }\n      }, \"Empty cart\"), /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 21\n        }\n      }, \"Go shopping\"), /*#__PURE__*/React.createElement(IconBar, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 21\n        }\n      }));\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: headBar.overview,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(OverHeadBar, {\n      currentPage: \"cart\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: cart.overview,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: cart.productList,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 21\n      }\n    }, this.state.productList.map((product, index) => {\n      return /*#__PURE__*/React.createElement(CartProduct, {\n        product: product,\n        index: index,\n        key: index,\n        onRemove: this.removeItem,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 33\n        }\n      });\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: cart.right,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(CheckoutForm, {\n      onClear: this.emptyCart,\n      onCheckout: this.checkoutCart,\n      moeny: this.totalCost(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 25\n      }\n    }))), /*#__PURE__*/React.createElement(IconBar, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 17\n      }\n    }));\n  }\n\n}\n\nexport default ShoppingCartPage;","map":{"version":3,"sources":["C:/Users/DELL/WebTech/fullstacksite/client/src/views/ShoppingCartPage.js"],"names":["React","Component","OverHeadBar","IconBar","Link","CartProduct","cart","CheckoutForm","headBar","ShoppingCartPage","constructor","props","removeItem","index","arr","JSON","parse","localStorage","getItem","splice","setItem","stringify","setState","productList","emptyCart","clear","checkoutCart","childState","alert","state","loading","bind","componentDidMount","console","log","totalCost","list","sum","key","cost","render","length","overview","map","product","right"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport OverHeadBar from \"./OverHeadBar\";\r\nimport IconBar from \"./IconBar\";\r\nimport Link from \"@material-ui/core/Link\";\r\nimport CartProduct from \"../Component/CartProduct\";\r\nimport cart from \"../views/ShoppingCart.module.css\";\r\nimport CheckoutForm from \"../Component/CheckoutForm\";\r\nimport headBar from \"./OverHeadBar.module.css\";\r\n\r\nclass ShoppingCartPage extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            loading: true,\r\n            productList: null\r\n        }\r\n        this.checkoutCart = this.checkoutCart.bind(this);\r\n    }\r\n\r\n    async componentDidMount() {\r\n        let cart = await localStorage.getItem('myCart');\r\n        var arr = JSON.parse(cart);\r\n        if (arr) {\r\n            this.setState({productList: arr});\r\n        }\r\n        console.log(this.state.productList);\r\n        this.setState({loading: false});\r\n    }\r\n\r\n    removeItem = (index) => {\r\n        let arr = JSON.parse(localStorage.getItem('myCart'));\r\n        arr.splice(index,1);\r\n        localStorage.setItem('myCart', JSON.stringify(arr));\r\n        this.setState({productList: arr});\r\n    }\r\n\r\n    emptyCart = () => {\r\n        localStorage.clear();\r\n        this.setState({productList: null});\r\n    }\r\n\r\n    checkoutCart = (childState) => {\r\n        //console.log(childState);\r\n        //         //-----------------------------------------\r\n        //         // GRACE LOOK HERE !!!!!!!!!!!!!!!!!!!!!!!!\r\n        //         /*if (this.state.userEmail) {\r\n        //             fetch(('/api/subs'), {\r\n        //                 method: 'POST',\r\n        //                 headers: {\r\n        //                     'Content-Type': 'application/json'\r\n        //                 },\r\n        //                 body: JSON.stringify({\r\n        //                     email: this.state.userEmail\r\n        //                 })\r\n        //             }).then((res) => {\r\n        //                 console.log(res)\r\n        //             }).catch(err => console.log(err));\r\n        //         }*/\r\n        //         alert(`Success: ${this.state.userEmail} added`);\r\n        //     };\r\n        alert(\"Success\");\r\n        //console.log(\"passed to shoppingCartPage\");\r\n        //console.log(this.state);\r\n    }\r\n\r\n    totalCost() {\r\n        var list = this.state.productList;\r\n        var sum = 0;\r\n        for (var key in list) {\r\n            sum += list[key].cost;\r\n        }\r\n        return sum;\r\n    }\r\n\r\n    render() {\r\n        if (this.state.loading) return <div><OverHeadBar currentPage='cart'/>loading...</div>\r\n        if (!this.state.productList || this.state.productList.length===0) {\r\n            return (\r\n                <div>\r\n                    <OverHeadBar currentPage='cart'/>\r\n                    <div>Empty cart</div>\r\n                    <div>Go shopping</div>\r\n                    <IconBar />\r\n                </div>);}\r\n        return (\r\n            <div className={headBar.overview}>\r\n                <OverHeadBar currentPage='cart'/>\r\n                <div className={cart.overview}>\r\n                    <div className={cart.productList}>\r\n                        {this.state.productList.map((product, index) => {\r\n                            return (\r\n                                <CartProduct product={product} index={index} key={index} onRemove={this.removeItem}/>\r\n                            )})\r\n                        }\r\n                    </div>\r\n                    <div className={cart.right}>\r\n                        <CheckoutForm onClear={this.emptyCart} onCheckout={this.checkoutCart} moeny={this.totalCost()}/>\r\n                    </div>\r\n                </div>\r\n\r\n                <IconBar />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default ShoppingCartPage;"]},"metadata":{},"sourceType":"module"}